<app-simple-modal title="Antécédents pour adulte">
  <form [formGroup]="backgroundsForm">
    <div class="row">
      <div class="col-md-6">
        <app-select
          [clearable]="false"
          [searchable]="false"
          [editable]="false"
          label="Diabète"
          [options]="diabetesOptions"
          [control]="diabetesControl"
        >
        </app-select>
      </div>
      <div class="col-md-6">
        <ng-container *ngIf="diabetesControl.value?.id === true">
          <app-select
            [clearable]="false"
            [searchable]="false"
            [editable]="false"
            label="de type"
            [options]="diabetesDetailOptions"
            [control]="diabetesDetailControl"
          >
          </app-select>
        </ng-container>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <app-select
          [clearable]="false"
          [searchable]="false"
          [editable]="false"
          label="UGD"
          [options]="ugdOptions"
          [control]="ugdControl"
        >
        </app-select>
      </div>
      <div class="col-md-6"></div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <app-select
          [clearable]="false"
          [searchable]="false"
          [editable]="false"
          label="HTA"
          [options]="htaOptions"
          [control]="htaControl"
        >
        </app-select>
      </div>
      <div class="col-md-6"></div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <app-select
          [clearable]="false"
          [searchable]="false"
          [editable]="false"
          label="Asthme"
          [options]="asthmaOptions"
          [control]="asthmaControl"
        >
        </app-select>
      </div>
      <div class="col-md-6"></div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <app-select
          [clearable]="false"
          [searchable]="false"
          [editable]="false"
          label="Drépanocytose"
          [options]="drepanocytoseOptions"
          [control]="drepanocytoseControl"
        >
        </app-select>
      </div>
      <div class="col-md-6">
        <ng-container *ngIf="drepanocytoseControl.value?.id === true">
          <app-select
            [clearable]="false"
            [searchable]="false"
            [editable]="false"
            label="Hb"
            [options]="drepanocytoseDetailOptions"
            [control]="drepanocytoseDetailControl"
          >
          </app-select>
        </ng-container>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <app-select
          [clearable]="false"
          [searchable]="false"
          [editable]="false"
          label="Alcoolisme"
          [options]="alcoholismOptions"
          [control]="alcoholismControl"
        >
        </app-select>
      </div>
      <div class="col-md-6"></div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <app-select
          [clearable]="false"
          [searchable]="false"
          [editable]="false"
          label="Tabagisme"
          [options]="smokingOptions"
          [control]="smokingControl"
        >
        </app-select>
      </div>
      <div class="col-md-6">
        <ng-container *ngIf="smokingControl.value?.id === true">
          <div class="row">
            <div class="col-md-4">
              <app-input
                [alignRight]="true"
                maskFormat="separator"
                label="Fréquence"
                [control]="smokingDetailTextControl"
              >
              </app-input>
            </div>
            <div class="col-md-4">
              <app-select
                [clearable]="false"
                [searchable]="false"
                [editable]="false"
                label="-"
                [options]="smokingDetailOptions1"
                [control]="smokingDetailControl1"
              >
              </app-select>
            </div>
            <div class="col-md-4">
              <app-select
                [clearable]="false"
                [searchable]="false"
                [editable]="false"
                label="-"
                [options]="smokingDetailOptions2"
                [control]="smokingDetailControl2"
              >
              </app-select>
            </div>
          </div>
        </ng-container>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <app-input
          [alignRight]="true"
          maskFormat="separator"
          label="Nombre de médicaments en utilisation"
          [control]="medicinesInUseControl"
        >
        </app-input>
      </div>
      <div class="col-md-6 d-flex justify-content-center align-items-end">
        <ng-container *ngIf="medicinesInUseControl.value >= 1">
          <button
            class="btn btn-secondary"
            (click)="openMultiInputModal(0, medicinesInUseControl.value)"
          >
            Renseigner la liste des médicaments
          </button>
        </ng-container>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <app-input
          [alignRight]="true"
          maskFormat="separator"
          label="Interventions chirurgicales"
          [control]="surgeriesControl"
        >
        </app-input>
      </div>
      <div class="col-md-6 d-flex justify-content-center align-items-end">
        <ng-container *ngIf="surgeriesControl.value >= 1">
          <button
            class="btn btn-secondary"
            (click)="openMultiInputModal(1, surgeriesControl.value)"
          >
            Renseigner les interventions chirurgicales
          </button>
        </ng-container>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <app-input
          [alignRight]="true"
          maskFormat="separator"
          label="Hospitalisations antérieures"
          [control]="hospitalisationsControl"
        >
        </app-input>
      </div>
      <div class="col-md-6 d-flex justify-content-center align-items-center">
        <ng-container *ngIf="hospitalisationsControl.value >= 1">
          <button
            class="btn btn-secondary"
            (click)="openMultiInputModal(2, hospitalisationsControl.value)"
          >
            Renseigner les détails des hospitalisations
          </button>
        </ng-container>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <label for="allergiesId" class="form-label custom-form-label-sm">
          Allergies connues
        </label>
        <textarea
          id="allergiesId"
          class="form-control form-control-sm mb-2"
          rows="2"
          [formControl]="allergiesControl"
        ></textarea>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <label for="othersId" class="form-label custom-form-label-sm">
          Autres
        </label>
        <textarea
          id="othersId"
          class="form-control form-control-sm"
          rows="2"
          [formControl]="othersControl"
        ></textarea>
      </div>
    </div>

    <div class="d-flex justify-content-end mt-3">
      <button type="button" class="btn btn-success">Valider et fermer</button>
    </div>
  </form>
</app-simple-modal>
